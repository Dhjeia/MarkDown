# 1
#include <stdio.h>
#include "mpi.h"
#define N 100000
int main(int argc, char *argv[]) {
double local = 0.0, pi, w, temp = 0.0;
int i, taskid, numtask;
w = 1.0 / N;
MPI_ Init(dargc, dargv) :
MPI_Comm_rank(MPI_COMM_WORLD, &taskid);
MPI Comm
_size(MPI_COMM_WORLD, &numtask) ;
for (i = taskid; i < N; i = i + numtask) {
temp = (i + 0.5) *
local = 4.0 / (1.0 + temp * temp) + local;
｝
MPI_Reduce(&local, &pi, 1, MPI_DOUBLE, MPI _SUM,
0，
MPI COMM WORLD):
if (taskid == 0) {
printf("pi is %.20f \n"
', pi * w);
｝
MPI Finalize();
return 0;


![alt text](image.png)｝

# 2
## 1
#include <stdio.h>
#include <omp.h>
static long num_steps = 100000;
double step;
#define NUM_THREADS 2
int main() {
    int i;
    double x, pi, sum[NUM_THREADS];
    step = 1.0 / (double)num_steps;
    omp_set_num_threads(NUM_THREADS);
    #pragma omp parallel private(i)
    {
        double x;
        int id;
        id = omp_get_thread_num();
        for (i = id, sum[id] = 0.0; i < num_steps; i = i + NUM_THREADS) {
            x = (i + 0.5) * step;
            sum[id] += 4.0 / (1.0 + x * x);
        }
    }
    for (i = 0, pi = 0.0; i < NUM_THREADS; i++) pi += sum[i] * step;
    printf("%lf\n", pi);
    return 0;
}

![alt text](image-1.png)

## 2
#include <stdio.h>
#include <omp.h>

static long num_steps = 100000;
double step;

int main() {
    int i;
    double x, pi, sum = 0.0;
    step = 1.0 / (double)num_steps;

    #pragma omp parallel private(x)
    {
        #pragma omp for reduction(+:sum)
        for (i = 0; i < num_steps; i++) {
            x = (i + 0.5) * step;
            sum += 4.0 / (1.0 + x * x);
        }
    }

    pi = sum * step;
    printf("Calculated value of pi: %.15f\n", pi);

    return 0;
}

![alt text](image-2.png)

## 3
#include <stdio.h>
#include <omp.h>
static long num_steps = 100000;
double step;
#define NUM_THREADS 2
void main ()
{
    int i;
    double pi=0.0;
    double sum=0.0;
    double x=0.0;
    step = 1.0/(double) num_steps;
    omp_set_num_threads(NUM_THREADS);
    #pragma omp parallel for reduction(+:sum) private(x)
    for(i=1;i<= num_steps; i++){
        x = (i-0.5)*step;
        sum += 4.0/(1.0+x*x);
    }
    pi = sum * step;
    printf("%lf\n",pi);
}

![alt text](image-4.png)

## 4
#include <stdio.h>
#include <omp.h>

static long num_steps = 100000;
double step;
#define NUM_THREADS 2

int main() {
    int i, id;
    double x, pi = 0.0, sum = 0.0;
    step = 1.0 / (double) num_steps;
    omp_set_num_threads(NUM_THREADS);

    #pragma omp parallel private(id, i, x, sum)
    {
        id = omp_get_thread_num();
        for (i = id, sum = 0.0; i < num_steps; i = i + NUM_THREADS) {
            x = (i + 0.5) * step;
            sum += 4.0 / (1.0 + x * x);
        }

        #pragma omp critical
        pi += sum;
    }

    pi *= step;
    printf("%lf\n", pi);

    return 0;
}

![alt text](image-5.png)

## 3
#include <stdio.h>
#include <stdlib.h>
#include <mpi.h>

#define N 4

void init_matrix(double A[N][N]) {
    int i, j;
    for (i = 0; i < N; i++) {
        for (j = 0; j < N; j++) {
            A[i][j] = i * N + j + 1;
        }
    }
}

int main(int argc, char *argv[]) {
    int rank, size;
    MPI_Init(&argc, &argv);
    MPI_Comm_rank(MPI_COMM_WORLD, &rank);
    MPI_Comm_size(MPI_COMM_WORLD, &size);

    double A[N][N];
    init_matrix(A);

    MPI_Datatype lower_triangle_type;
    int block_lengths[N];
    MPI_Aint displacements[N];
    MPI_Datatype types[N];
    
    int i, j, count = 0;
    for (i = 0; i < N; i++) {
        block_lengths[i] = i + 1;
        displacements[i] = (i * (i + 1)) / 2;
        types[i] = MPI_DOUBLE;
        count += block_lengths[i];
    }

    MPI_Type_create_struct(N, block_lengths, displacements, types, &lower_triangle_type);
    MPI_Type_commit(&lower_triangle_type);

    if (rank == 1) {
        MPI_Send(&A[0][0], 1, lower_triangle_type, 0, 0, MPI_COMM_WORLD);
    }

    if (rank == 0) {
        double received_data[count];
        MPI_Recv(received_data, count, lower_triangle_type, 1, 0, MPI_COMM_WORLD, MPI_STATUS_IGNORE);

        printf("Received lower triangle:\n");
        int index = 0;
        for (i = 0; i < N; i++) {
            for (j = 0; j <= i; j++) {
                printf("%lf ", received_data[index]);
                index++;
            }
            printf("\n");
        }
    }

    MPI_Type_free(&lower_triangle_type);

    MPI_Finalize();
    return 0;
}